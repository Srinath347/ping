{"ast":null,"code":"var _jsxFileName = \"/Users/srinath/Desktop/ping/ping-client/src/signin/Signin.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Form, Input, Button, Divider, notification } from \"antd\";\nimport { UserOutlined, LockOutlined, DingtalkOutlined, FacebookFilled } from \"@ant-design/icons\";\nimport { login, facebookLogin } from \"../util/ApiUtil\";\nimport \"./Signin.css\";\n\n/*global FB*/\n\nconst Signin = props => {\n  const [loading, setLoading] = useState(false);\n  const [facebookLoading, setFacebookLoading] = useState(false);\n  const [test, setTest] = useState(localStorage.getItem(\"accessToken\"));\n  useEffect(() => {\n    if (localStorage.getItem(\"accessToken\") !== null) {\n      props.history.push(\"/\");\n    }\n    initFacebookLogin();\n  }, []);\n  useEffect(() => {\n    initFacebookLogin();\n  }, [test]);\n  const initFacebookLogin = () => {\n    window.fbAsyncInit = function () {\n      FB.init({\n        appId: \"118319422120166\",\n        autoLogAppEvents: true,\n        xfbml: true,\n        version: \"v7.0\"\n      });\n    };\n  };\n  const getFacebookAccessToken = () => {\n    setFacebookLoading(true);\n    FB.login(function (response) {\n      if (response.status === \"connected\") {\n        const facebookLoginRequest = {\n          accessToken: response.authResponse.accessToken\n        };\n        facebookLogin(facebookLoginRequest).then(response => {\n          localStorage.setItem(\"accessToken\", response.accessToken);\n          props.history.push(\"/\");\n          setFacebookLoading(false);\n        }).catch(error => {\n          if (error.status === 401) {\n            notification.error({\n              message: \"Error\",\n              description: \"Invalid credentials\"\n            });\n          } else {\n            notification.error({\n              message: \"Error\",\n              description: error.message || \"Sorry! Something went wrong. Please try again!\"\n            });\n          }\n          setFacebookLoading(false);\n        });\n      } else {\n        console.log(response);\n      }\n    }, {\n      scope: \"email\"\n    });\n  };\n  const onFinish = values => {\n    console.log(\"values\", values);\n    setLoading(true);\n    localStorage.setItem(\"senderId\", values.senderId);\n    localStorage.setItem(\"receiverId\", values.receiverId);\n    setLoading(false);\n    props.history.push(\"/chat\");\n    // login(values)\n    //   .then((response) => {\n    //     localStorage.setItem(\"accessToken\", response.accessToken);\n    //     props.history.push(\"/\");\n    //     setLoading(false);\n    //   })\n    //   .catch((error) => {\n    //     if (error.status === 401) {\n    //       notification.error({\n    //         message: \"Error\",\n    //         description: \"Username or Password is incorrect. Please try again!\",\n    //       });\n    //     } else {\n    //       notification.error({\n    //         message: \"Error\",\n    //         description:\n    //           error.message || \"Sorry! Something went wrong. Please try again!\",\n    //       });\n    //     }\n    //     setLoading(false);\n    //   });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    name: \"normal_login\",\n    className: \"login-form\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"senderId\",\n    rules: [{\n      required: true,\n      message: \"Please input your user id!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    size: \"large\",\n    prefix: /*#__PURE__*/React.createElement(UserOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }\n    }),\n    placeholder: \"user id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"receiverId\",\n    rules: [{\n      required: true,\n      message: \"Please input receiver user id!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    size: \"large\",\n    prefix: /*#__PURE__*/React.createElement(UserOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    })\n    // type=\"password\"\n    ,\n    placeholder: \"user id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    shape: \"round\",\n    size: \"large\",\n    htmlType: \"submit\",\n    className: \"login-form-button\",\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, \"Enter\")), \"Not a member yet? \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 27\n    }\n  }, \"Sign up\")));\n};\nexport default Signin;","map":{"version":3,"names":["React","useEffect","useState","Form","Input","Button","Divider","notification","UserOutlined","LockOutlined","DingtalkOutlined","FacebookFilled","login","facebookLogin","Signin","props","loading","setLoading","facebookLoading","setFacebookLoading","test","setTest","localStorage","getItem","history","push","initFacebookLogin","window","fbAsyncInit","FB","init","appId","autoLogAppEvents","xfbml","version","getFacebookAccessToken","response","status","facebookLoginRequest","accessToken","authResponse","then","setItem","catch","error","message","description","console","log","scope","onFinish","values","senderId","receiverId","remember","required"],"sources":["/Users/srinath/Desktop/ping/ping-client/src/signin/Signin.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Form, Input, Button, Divider, notification } from \"antd\";\nimport {\n  UserOutlined,\n  LockOutlined,\n  DingtalkOutlined,\n  FacebookFilled,\n} from \"@ant-design/icons\";\nimport { login, facebookLogin } from \"../util/ApiUtil\";\nimport \"./Signin.css\";\n\n/*global FB*/\n\nconst Signin = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [facebookLoading, setFacebookLoading] = useState(false);\n  const [test, setTest] = useState(localStorage.getItem(\"accessToken\"));\n\n  useEffect(() => {\n    if (localStorage.getItem(\"accessToken\") !== null) {\n      props.history.push(\"/\");\n    }\n    initFacebookLogin();\n  }, []);\n\n  useEffect(() => {\n    initFacebookLogin();\n  }, [test]);\n\n  const initFacebookLogin = () => {\n    window.fbAsyncInit = function () {\n      FB.init({\n        appId: \"118319422120166\",\n        autoLogAppEvents: true,\n        xfbml: true,\n        version: \"v7.0\",\n      });\n    };\n  };\n\n  const getFacebookAccessToken = () => {\n    setFacebookLoading(true);\n    FB.login(\n      function (response) {\n        if (response.status === \"connected\") {\n          const facebookLoginRequest = {\n            accessToken: response.authResponse.accessToken,\n          };\n          facebookLogin(facebookLoginRequest)\n            .then((response) => {\n              localStorage.setItem(\"accessToken\", response.accessToken);\n              props.history.push(\"/\");\n              setFacebookLoading(false);\n            })\n            .catch((error) => {\n              if (error.status === 401) {\n                notification.error({\n                  message: \"Error\",\n                  description: \"Invalid credentials\",\n                });\n              } else {\n                notification.error({\n                  message: \"Error\",\n                  description:\n                    error.message ||\n                    \"Sorry! Something went wrong. Please try again!\",\n                });\n              }\n              setFacebookLoading(false);\n            });\n        } else {\n          console.log(response);\n        }\n      },\n      { scope: \"email\" }\n    );\n  };\n\n  const onFinish = (values) => {\n    console.log(\"values\" , values);\n    setLoading(true);\n    localStorage.setItem(\"senderId\", values.senderId);\n    localStorage.setItem(\"receiverId\", values.receiverId);\n    setLoading(false);\n    props.history.push(\"/chat\");\n    // login(values)\n    //   .then((response) => {\n    //     localStorage.setItem(\"accessToken\", response.accessToken);\n    //     props.history.push(\"/\");\n    //     setLoading(false);\n    //   })\n    //   .catch((error) => {\n    //     if (error.status === 401) {\n    //       notification.error({\n    //         message: \"Error\",\n    //         description: \"Username or Password is incorrect. Please try again!\",\n    //       });\n    //     } else {\n    //       notification.error({\n    //         message: \"Error\",\n    //         description:\n    //           error.message || \"Sorry! Something went wrong. Please try again!\",\n    //       });\n    //     }\n    //     setLoading(false);\n    //   });\n  };\n\n  return (\n    <div className=\"login-container\">\n      {/* <DingtalkOutlined style={{ fontSize: 50 }} /> */}\n      <Form\n        name=\"normal_login\"\n        className=\"login-form\"\n        initialValues={{ remember: true }}\n        onFinish={onFinish}\n      >\n        <Form.Item\n          name=\"senderId\"\n          rules={[{ required: true, message: \"Please input your user id!\" }]}\n        >\n          <Input\n            size=\"large\"\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"user id\"\n          />\n        </Form.Item>\n        \n        <Form.Item\n          name=\"receiverId\"\n          rules={[{ required: true, message: \"Please input receiver user id!\" }]}\n        >\n          <Input\n            size=\"large\"\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\n            // type=\"password\"\n            placeholder=\"user id\"\n          />\n        </Form.Item>\n        <Form.Item>\n          <Button\n            shape=\"round\"\n            size=\"large\"\n            htmlType=\"submit\"\n            className=\"login-form-button\"\n            loading={loading}\n          >\n            Enter\n          </Button>\n        </Form.Item>\n        {/* <Divider>OR</Divider> */}\n        {/* <Form.Item>\n          <Button\n            icon={<FacebookFilled style={{ fontSize: 20 }} />}\n            loading={facebookLoading}\n            className=\"login-with-facebook\"\n            shape=\"round\"\n            size=\"large\"\n            onClick={getFacebookAccessToken}\n          >\n            Log in With Facebook\n          </Button>\n        </Form.Item> */}\n        Not a member yet? <a href=\"/signup\">Sign up</a>\n      </Form>\n    </div>\n  );\n};\n\nexport default Signin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}