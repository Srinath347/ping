{"ast":null,"code":"var _jsxFileName = \"/Users/srinath/Desktop/ping/ping-client/src/chat/Chat.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Button, message } from \"antd\";\nimport { getUsers, countNewMessages, findChatMessages, findChatMessage } from \"../util/ApiUtil\";\nimport { useRecoilValue, useRecoilState } from \"recoil\";\nimport { loggedInUser, chatActiveContact, chatMessages } from \"../atom/globalState\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport \"./Chat.css\";\nimport { List } from \"rc-field-form\";\nvar stompClient = null;\nconst Chat = props => {\n  // const currentUser = useRecoilValue(loggedInUser);\n  const [text, setText] = useState(\"\");\n  // const [newChat, isNewChat] = useState(true);\n  const [contacts, setContacts] = useState([]);\n  const [activeContact, setActiveContact] = useRecoilState(chatActiveContact);\n  const [messages, setMessages] = useRecoilState(chatMessages);\n  const [chatMssgs, setChatMssgs] = useRecoilState(chatMessages);\n  // const currentUser = {\n  //   id: localStorage.getItem(\"senderId\"),\n\n  // }\n  const sender = localStorage.getItem(\"senderId\");\n  const receiver = localStorage.getItem(\"receiverId\");\n  useEffect(() => {\n    if (localStorage.getItem(\"senderId\") === null) {\n      props.history.push(\"/login\");\n    }\n    connect();\n    // loadContacts();\n  }, []);\n  useEffect(() => {\n    const messages = sessionStorage.getItem(\"chatMessages\");\n    if (messages == null || messages.length == 0) {\n      setChatMssgs([]);\n    }\n  }, []);\n\n  // useEffect(() => {\n  //   // if (activeContact === undefined) return;\n  //   // if(newChat) return;\n  //   // findChatMessages(receiver, sender).then((msgs) =>\n  //   //   setMessages(msgs)\n  //   // );\n  //   // if (messages != null && messages.length > 0) {\n  //   //   isNewChat(false);\n  //   // } \n  //   // else {\n  //   //   setMessages([]);\n  //   // }\n  //   // console.log(\"Messsages so far\" , messages);\n  //   // loadContacts();\n  // }, \n  // // [activeContact]\n  // []);\n\n  const connect = () => {\n    const Stomp = require(\"stompjs\");\n    var SockJS = require(\"sockjs-client\");\n    SockJS = new SockJS(\"http://localhost:8080/ws\");\n    stompClient = Stomp.over(SockJS);\n    stompClient.connect({}, onConnected, onError);\n  };\n  const onConnected = () => {\n    console.log(\"connected\");\n    // console.log(currentUser);\n    stompClient.subscribe(\"/user/\" + sender + \"/queue/messages\", onMessageReceived);\n  };\n  const onError = err => {\n    console.log(err);\n  };\n  const onMessageReceived = msg => {\n    console.log(\"message: \", msg);\n    // isNewChat(false);\n    const chat = JSON.parse(msg.body);\n    console.log(\"messge received: \" + sender, chat.senderId);\n    if (receiver == chat.senderId) {\n      const message = chat;\n      const formattedMessage = {\n        senderId: chat.senderId,\n        recipientId: chat.recipientId,\n        senderName: \"joe\",\n        recipientName: \"harry\",\n        content: chat.content,\n        timestamp: chat.timestamp\n      };\n      const newMessages = JSON.parse(sessionStorage.getItem(\"chatMessages\") || \"[]\");\n      console.log(\"Messages : \", newMessages);\n      newMessages.push(formattedMessage);\n      setMessages(newMessages);\n      sessionStorage.setItem(\"chatMessages\", JSON.stringify(newMessages));\n    }\n  };\n  const sendMessage = msg => {\n    if (msg.trim() !== \"\") {\n      const message = {\n        senderId: sender,\n        recipientId: receiver,\n        senderName: \"joe\",\n        recipientName: \"harry\",\n        content: msg,\n        timestamp: new Date()\n      };\n      stompClient.send(\"/app/chat\", {}, JSON.stringify(message));\n      const newMessages = [...messages];\n      newMessages.push(message);\n      console.log(\"Newmssg: \", newMessages);\n      setMessages(newMessages);\n      const newChatMessages = [...chatMssgs];\n      newChatMessages.push(message);\n      setMessages(newChatMessages);\n      console.log(\"newChatMessages: \", newChatMessages);\n      sessionStorage.setItem(\"chatMessages\", JSON.stringify(newChatMessages));\n      console.log(\"chatMssgs: \", chatMssgs);\n      printMessages();\n    }\n  };\n  const printMessages = () => {\n    const mssgs = JSON.parse(sessionStorage.getItem(\"chatMessages\") || \"[]\");\n    console.log(mssgs);\n  };\n  const loadContacts = () => {\n    const promise = getUsers().then(users => users.map(contact => countNewMessages(contact.id, sender).then(count => {\n      contact.newMessages = count;\n      return contact;\n    })));\n    promise.then(promises => Promise.all(promises).then(users => {\n      setContacts(users);\n      if (activeContact === undefined && users.length > 0) {\n        setActiveContact(users[0]);\n      }\n    }));\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"frame\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"sidepanel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }\n  }, sender), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"status-options\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    id: \"status-online\",\n    class: \"active\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"status-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 19\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 55\n    }\n  }, \"Online\")), /*#__PURE__*/React.createElement(\"li\", {\n    id: \"status-away\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"status-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 55\n    }\n  }, \"Away\")), /*#__PURE__*/React.createElement(\"li\", {\n    id: \"status-busy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"status-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 55\n    }\n  }, \"Busy\")), /*#__PURE__*/React.createElement(\"li\", {\n    id: \"status-offline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"status-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 55\n    }\n  }, \"Offline\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"contacts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, contacts.map(contact => /*#__PURE__*/React.createElement(\"li\", {\n    onClick: () => setActiveContact(contact),\n    class: activeContact && contact.id === activeContact.id ? \"contact active\" : \"contact\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    class: \"contact-status online\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    id: contact.id,\n    src: contact.profilePicture,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"meta\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    class: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }, contact.name), contact.newMessages !== undefined && contact.newMessages > 0 && /*#__PURE__*/React.createElement(\"p\", {\n    class: \"preview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 25\n    }\n  }, contact.newMessages, \" new messages\"))))))), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"bottom-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    id: \"addcontact\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fa fa-user fa-fw\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }\n  }, \"Profile\")), /*#__PURE__*/React.createElement(\"button\", {\n    id: \"settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"fa fa-cog fa-fw\",\n    \"aria-hidden\": \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, \"Settings\")))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"contact-profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: activeContact && activeContact.profilePicture,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 11\n    }\n  }, activeContact && activeContact.name)), /*#__PURE__*/React.createElement(ScrollToBottom, {\n    className: \"messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }, messages != null && messages.map(msg => /*#__PURE__*/React.createElement(\"li\", {\n    class: msg.senderId === sender ? \"sent\" : \"replies\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 17\n    }\n  }, msg.content))))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"message-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"user_input\",\n    size: \"large\",\n    placeholder: \"Write your message...\",\n    value: text,\n    onChange: event => setText(event.target.value),\n    onKeyPress: event => {\n      if (event.key === \"Enter\") {\n        sendMessage(text);\n        setText(\"\");\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    icon: /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fa fa-paper-plane\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }\n    }),\n    onClick: () => {\n      sendMessage(text);\n      setText(\"\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 13\n    }\n  })))));\n};\nexport default Chat;","map":{"version":3,"names":["React","useEffect","useState","Button","message","getUsers","countNewMessages","findChatMessages","findChatMessage","useRecoilValue","useRecoilState","loggedInUser","chatActiveContact","chatMessages","ScrollToBottom","List","stompClient","Chat","props","text","setText","contacts","setContacts","activeContact","setActiveContact","messages","setMessages","chatMssgs","setChatMssgs","sender","localStorage","getItem","receiver","history","push","connect","sessionStorage","length","Stomp","require","SockJS","over","onConnected","onError","console","log","subscribe","onMessageReceived","err","msg","chat","JSON","parse","body","senderId","formattedMessage","recipientId","senderName","recipientName","content","timestamp","newMessages","setItem","stringify","sendMessage","trim","Date","send","newChatMessages","printMessages","mssgs","loadContacts","promise","then","users","map","contact","id","count","promises","Promise","all","undefined","profilePicture","name","event","target","value","key"],"sources":["/Users/srinath/Desktop/ping/ping-client/src/chat/Chat.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Button, message } from \"antd\";\nimport {\n  getUsers,\n  countNewMessages,\n  findChatMessages,\n  findChatMessage,\n} from \"../util/ApiUtil\";\nimport { useRecoilValue, useRecoilState } from \"recoil\";\nimport {\n  loggedInUser,\n  chatActiveContact,\n  chatMessages,\n} from \"../atom/globalState\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport \"./Chat.css\";\nimport { List } from \"rc-field-form\";\n\nvar stompClient = null;\nconst Chat = (props) => {\n  // const currentUser = useRecoilValue(loggedInUser);\n  const [text, setText] = useState(\"\");\n  // const [newChat, isNewChat] = useState(true);\n  const [contacts, setContacts] = useState([]);\n  const [activeContact, setActiveContact] = useRecoilState(chatActiveContact);\n  const [messages, setMessages] = useRecoilState(chatMessages);\n  const [chatMssgs, setChatMssgs] = useRecoilState(chatMessages);\n  // const currentUser = {\n  //   id: localStorage.getItem(\"senderId\"),\n\n  // }\n  const sender = localStorage.getItem(\"senderId\");\n  const receiver = localStorage.getItem(\"receiverId\");\n\n  useEffect(() => {\n\n    if (localStorage.getItem(\"senderId\") === null) {\n      props.history.push(\"/login\");\n    }\n    connect();\n    // loadContacts();\n  }, []);\n\n  useEffect(() => {\n    const messages = sessionStorage.getItem(\"chatMessages\");\n    if(messages == null || messages.length == 0) {\n      setChatMssgs([]);\n    }\n  }, []);\n\n  // useEffect(() => {\n  //   // if (activeContact === undefined) return;\n  //   // if(newChat) return;\n  //   // findChatMessages(receiver, sender).then((msgs) =>\n  //   //   setMessages(msgs)\n  //   // );\n  //   // if (messages != null && messages.length > 0) {\n  //   //   isNewChat(false);\n  //   // } \n  //   // else {\n  //   //   setMessages([]);\n  //   // }\n  //   // console.log(\"Messsages so far\" , messages);\n  //   // loadContacts();\n  // }, \n  // // [activeContact]\n  // []);\n\n  const connect = () => {\n    const Stomp = require(\"stompjs\");\n    var SockJS = require(\"sockjs-client\");\n    SockJS = new SockJS(\"http://localhost:8080/ws\");\n    stompClient = Stomp.over(SockJS);\n    stompClient.connect({}, onConnected, onError);\n  };\n\n  const onConnected = () => {\n    console.log(\"connected\");\n    // console.log(currentUser);\n    stompClient.subscribe(\n      \"/user/\" + sender + \"/queue/messages\",\n      onMessageReceived\n    );\n  };\n\n  const onError = (err) => {\n    console.log(err);\n  };\n\n  const onMessageReceived = (msg) => {\n    console.log(\"message: \", msg);\n    // isNewChat(false);\n    const chat = JSON.parse(msg.body);\n    console.log(\"messge received: \" + sender, chat.senderId);\n    if (receiver == chat.senderId) {\n        const message = chat;\n        const formattedMessage = {\n          senderId: chat.senderId,\n          recipientId: chat.recipientId,\n          senderName: \"joe\",\n          recipientName: \"harry\",\n          content: chat.content,\n          timestamp: chat.timestamp,\n        };\n        const newMessages = JSON.parse(sessionStorage.getItem(\"chatMessages\") || \"[]\");\n        console.log(\"Messages : \" , newMessages);\n        newMessages.push(formattedMessage);\n        setMessages(newMessages);\n        sessionStorage.setItem(\"chatMessages\", JSON.stringify(newMessages));\n    }\n  };\n\n  const sendMessage = (msg) => {\n    if (msg.trim() !== \"\") {\n      const message = {\n        senderId: sender,\n        recipientId: receiver,\n        senderName: \"joe\",\n        recipientName: \"harry\",\n        content: msg,\n        timestamp: new Date(),\n      };\n      stompClient.send(\"/app/chat\", {}, JSON.stringify(message));\n\n      const newMessages = [...messages];\n      newMessages.push(message);\n      console.log(\"Newmssg: \" , newMessages);\n      setMessages(newMessages);\n\n      const newChatMessages = [...chatMssgs];\n      newChatMessages.push(message);\n      setMessages(newChatMessages);\n      console.log(\"newChatMessages: \" , newChatMessages);\n      sessionStorage.setItem(\"chatMessages\", JSON.stringify(newChatMessages));\n      console.log(\"chatMssgs: \" , chatMssgs);\n      printMessages();\n    }\n  };\n\n  const printMessages = () => {\n    const mssgs = JSON.parse(sessionStorage.getItem(\"chatMessages\") || \"[]\");\n    console.log(mssgs);\n  }\n\n  const loadContacts = () => {\n    const promise = getUsers().then((users) =>\n      users.map((contact) =>\n        countNewMessages(contact.id, sender).then((count) => {\n          contact.newMessages = count;\n          return contact;\n        })\n      )\n    );\n\n    promise.then((promises) =>\n      Promise.all(promises).then((users) => {\n        setContacts(users);\n        if (activeContact === undefined && users.length > 0) {\n          setActiveContact(users[0]);\n        }\n      })\n    );\n  };\n\n  return (\n    <div id=\"frame\">\n      <div id=\"sidepanel\">\n        <div id=\"profile\">\n          <div class=\"wrap\">\n            {/* <img\n              id=\"profile-img\"\n              src={currentUser.profilePicture}\n              class=\"online\"\n              alt=\"\"\n            /> */}\n            <p>{sender}</p>\n            <div id=\"status-options\">\n              <ul>\n                <li id=\"status-online\" class=\"active\">\n                  <span class=\"status-circle\"></span> <p>Online</p>\n                </li>\n                <li id=\"status-away\">\n                  <span class=\"status-circle\"></span> <p>Away</p>\n                </li>\n                <li id=\"status-busy\">\n                  <span class=\"status-circle\"></span> <p>Busy</p>\n                </li>\n                <li id=\"status-offline\">\n                  <span class=\"status-circle\"></span> <p>Offline</p>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <div id=\"search\" />\n        <div id=\"contacts\">\n          <ul>\n            {contacts.map((contact) => (\n              <li\n                onClick={() => setActiveContact(contact)}\n                class={\n                  activeContact && contact.id === activeContact.id\n                    ? \"contact active\"\n                    : \"contact\"\n                }\n              >\n                <div class=\"wrap\">\n                  <span class=\"contact-status online\"></span>\n                  <img id={contact.id} src={contact.profilePicture} alt=\"\" />\n                  <div class=\"meta\">\n                    <p class=\"name\">{contact.name}</p>\n                    {contact.newMessages !== undefined &&\n                      contact.newMessages > 0 && (\n                        <p class=\"preview\">\n                          {contact.newMessages} new messages\n                        </p>\n                      )}\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </div>\n        <div id=\"bottom-bar\">\n          <button id=\"addcontact\">\n            <i class=\"fa fa-user fa-fw\" aria-hidden=\"true\"></i>{\" \"}\n            <span>Profile</span>\n          </button>\n          <button id=\"settings\">\n            <i class=\"fa fa-cog fa-fw\" aria-hidden=\"true\"></i>{\" \"}\n            <span>Settings</span>\n          </button>\n        </div>\n      </div>\n      <div class=\"content\">\n        <div class=\"contact-profile\">\n          <img src={activeContact && activeContact.profilePicture} alt=\"\" />\n          <p>{activeContact && activeContact.name}</p>\n        </div>\n        <ScrollToBottom className=\"messages\">\n          <ul>\n            {/* {newChat } */}\n            {messages != null && messages.map((msg) => (\n              <li class={msg.senderId === sender ? \"sent\" : \"replies\"}>\n                {/* {msg.senderId !== sender} */}\n                <p>{msg.content}</p>\n              </li>\n            ))}\n          </ul>\n        </ScrollToBottom>\n        <div class=\"message-input\">\n          <div class=\"wrap\">\n            <input\n              name=\"user_input\"\n              size=\"large\"\n              placeholder=\"Write your message...\"\n              value={text}\n              onChange={(event) => setText(event.target.value)}\n              onKeyPress={(event) => {\n                if (event.key === \"Enter\") {\n                  sendMessage(text);\n                  setText(\"\");\n                }\n              }}\n            />\n\n            <Button\n              icon={<i class=\"fa fa-paper-plane\" aria-hidden=\"true\"></i>}\n              onClick={() => {\n                sendMessage(text);\n                setText(\"\");\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}